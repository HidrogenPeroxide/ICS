## 浮点数

- IEEE 754标准: ($ (-1)^s M 2^E $))
  - s（符号) - exp（数域E) - frac（小数域M)

$$
\sum_{k = -j}^i b_k \cdot 2^k
$$

---

- 单精度浮点数（float)
  - 1 + 8 + 23 = 32byte
- 双精度浮点数（double)
  - 1 + 11 + 52 = 64byte
- 半精度浮点数
  - 1 + 5 + 10
  - BF16：1 + 8 + 7（深度学习)

---

### 规格化浮点数（Normalized)

- 真实阶码值 - 偏置量「e为exp的位数」
  - 单精度数：Bias = 127 （E：-126 ~ 127)
  - 双精度数：Bias = 1023（Exp：1 ~ 2046, E：-1022 ~ 1023)

$$
E = Exp - Bias
$$

$$
Bias = 2^{e-1} - 1
$$

- 小数域的第一位隐含为1
  - frac = 00...0时 M = 1.0
  - frac =11...1时 M = 2 - $\epsilon$

---

### 非规格化浮点数（Denormalized)

- exp = 00...0

$$
E = 1 - Bias
$$

- exp = 00..0, frac != 00...0 表示非常接近于0的浮点数
  - 逐步丧失精度：Gradual underflow（逐步下溢)

---

### 特殊值

- exp = 11...1, frac = 00...0
  - 表示$\infin$：有正无穷 负无穷
- exp = 11...1, frac != 00...0
  - 表示NaN：计算时错误产生的数字

---

### 浮点数的舍入模式

- 0舍入、向下舍入、向上舍入；
- 向偶数舍入
  - 舍入后最低有效数字为0 「减小四舍五入带来的累计偏差」
- 舍入：将尾数部分截断，可能导致溢出（置为$T_{min} $或$T_{max}$)
